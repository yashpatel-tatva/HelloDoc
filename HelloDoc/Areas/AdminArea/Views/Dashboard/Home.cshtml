@using DataModels.AdminSideViewModels;
@model AdminDashboardViewModel;
<nav>
    <div class="nav nav-tabs row" id="status-tab" role="tablist">
        <div class="allstatus ">
            <button class="w-100 nav-link dashboardtab position-relative" id="status-new" data-bs-toggle="tab" data-bs-target="#s_new" type="button" role="tab" aria-controls="s_new" aria-selected="true">
                <div class="p-2 new rounded-4">
                    <div class="d-flex">
                        <div class="px-2 icons float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">NEW</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 1)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
        <div class="allstatus">
            <button class="nav-link dashboardtab position-relative w-100" id="status-pending" data-bs-toggle="tab" data-bs-target="#s_pending" type="button" role="tab" aria-controls="s_pending" aria-selected="false">
                <div class="p-2 pending rounded-4">
                    <div class="d-flex">
                        <div class="px-2 icons  float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">PENDING</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 2)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
        <div class="allstatus">
            <button class="nav-link dashboardtab position-relative w-100" id="status-active" data-bs-toggle="tab" data-bs-target="#s_active" type="button" role="tab" aria-controls="s_active" aria-selected="false">
                <div class="p-2 activecase rounded-4">
                    <div class="d-flex">
                        <div class="px-2 icons  float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">ACTIVE</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 3)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
        <div class="allstatus">
            <button class="nav-link dashboardtab position-relative w-100" id="status-conclude" data-bs-toggle="tab" data-bs-target="#s_conclude" type="button" role="tab" aria-controls="s_conclude" aria-selected="false">
                <div class="p-2 conclude rounded-4">
                    <div class="d-flex">
                        <div class="px-2  icons float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">CONCLUDE</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 4)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
        <div class="allstatus">
            <button class="nav-link dashboardtab position-relative w-100" id="status-toclose" data-bs-toggle="tab" data-bs-target="#s_toclose" type="button" role="tab" aria-controls="s_toclose" aria-selected="false">
                <div class="p-2 toclose rounded-4">
                    <div class="d-flex">
                        <div class="px-2 icons  float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">TO CLOSE</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 5)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
        <div class="allstatus">
            <button class="nav-link dashboardtab position-relative w-100" id="status-unpaid" data-bs-toggle="tab" data-bs-target="#s_unpaid" type="button" role="tab" aria-controls="s_unpaid" aria-selected="false">
                <div class="p-2 unpaid rounded-4">
                    <div class="d-flex">
                        <div class="px-2 icons  float-start small"><i class="bi bi-plus-circle-dotted"></i></div><div class="small fw-bold">UNPAID</div>
                    </div>
                    <div class="fw-bolder fs-4 p-2 text-start">@Model.requests.Count(x => x.Status == 6)</div>
                </div>
                <div class="bottomarrow"></div>
            </button>
        </div>
    </div>
</nav>

<div class="tab-content">
    <div class="d-flex mt-4 align-items-center justify-content-between">
        <div class="h3 mb-0">Patients<small class="h6 px-2" style="color: #203F9A" id="status_text"></small></div>
        <div class="d-flex">
            <div class="p-2 px-3 text-white mx-2 bg-info rounded">Send Link</div>
            <div class="p-2 px-3 text-white mx-2 bg-info rounded">Create Request</div>
            <div class="p-2 px-3 text-white mx-2 bg-info rounded">Export</div>
            <div class="p-2 px-3 text-white mx-2 bg-info rounded">Export All</div>
            <div class="p-2 px-3 text-white mx-2 bg-info rounded">Request DTY Support</div>
        </div>
    </div>
    <div id="status-tabContent" class="bg-white rounded-4 mt-3"></div>
</div>



<script>
    $(document).ready(function () {

        $('#status-tabContent').hide();

        var target = localStorage.getItem('target')
        $('.dashboardtab').on('click', function (e) {
            e.preventDefault();
            $('.dashboardtab').removeClass('active');
            $(this).addClass('active');
            var target = $(this).data('bs-target');
            localStorage.setItem('target', target);
            var url;
            switch (target) {
                case '#s_new':
                    $('#status_text').html("(New)")
                    url = '../Dashboard/Status_New';
                    break;
                case '#s_pending':
                    $('#status_text').html("(Pending)")
                    url = '../Dashboard/Status_Pending';
                    break;
                case '#s_active':
                    $('#status_text').html("(Active)")
                    url = '../Dashboard/Status_Active';
                    break;
                case '#s_conclude':
                    $('#status_text').html("(Conclude)")
                    url = '../Dashboard/Status_Conclude';
                    break;
                case '#s_toclose':
                    $('#status_text').html("(To Close)")
                    url = '../Dashboard/Status_Toclose';
                    break;
                case '#s_unpaid':
                    $('#status_text').html("(Unpaid)")
                    url = '../Dashboard/Status_Unpaid';
                    break;

                default:
                    url = '../Home/AdminLogin';
            }

            $.ajax({
                url: url,

                success: function (response) {
                    $('#status-tabContent').html(response);
                },
                error: function (xhr, status, error) {
                    console.error(error);
                }
            });
        });
        $('.dashboardtab[data-bs-target="' + target + '"]').trigger('click'); 

        $('#status-tabContent').show();

    });

</script>



